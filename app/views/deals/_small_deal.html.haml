.small_deal{ onclick: "Turbolinks.visit('#{deal_path(deal)}')" }
  %div{ class: "category category_#{deal.category}" }
  .price_and_discount
    .price
      %span.from= t('strings.from_price', price: number_to_currency(deal.real_price))
      %br
      %span.by= t('strings.by_price', price: number_to_currency(deal.price))
      
      - if deal.discount > 50
        .discount{ style: "background: url('#{asset_path('red_discount_small.png')}') -1px -2px" }= "#{deal.discount.to_i}%"
      - elsif deal.discount > 25
        .discount{ style: "background: url('#{asset_path('orange_discount_small.png')}') -1px -2px" }= "#{deal.discount.to_i}%"
      - else
        .discount= "#{deal.discount.to_i}%"
  .image
    %a{ href: deal_path(deal) }
      = Rails.cache.fetch([:deal, :image, deal.id], expires_in: 1.month) { "<img alt='#{deal.get_image_url}' title='#{deal.title}' src='#{deal.get_image_url}'>".html_safe }
  
  %h4= link_to truncate_title(deal.title, 21), deal_path(deal)
  .details
    .user_infos
      = t('strings.end_date', :end_date => deal.end_date? ? l(deal.end_date.to_date) : "-")
    .interactions
      %span.love_icon= deal.up_votes
      %span.report_icon= deal.down_votes